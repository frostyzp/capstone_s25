<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>skipping stones</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.compat.css"/>
    
    <!-- Scripts -->
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Lettering.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lettering.js/0.7.0/jquery.lettering.min.js"></script>
    <!-- Textillate.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/textillate/0.4.0/jquery.textillate.min.js"></script>
    <!-- Rita.js for poem generation -->
    <script src="https://unpkg.com/rita@3.1.3/dist/rita.min.js"></script>
    
    <!-- Our scripts -->
    <script src="wishing.js" defer></script>
    <script src="buttons.js" defer></script>
    <script src="grammar.js" defer></script>

    <style>
      .page {
        transition: opacity 0.8s ease-in-out;
      }
      .page.hidden {
        opacity: 0;
        pointer-events: none;
      }
      .page.visible {
        opacity: 1;
      }
    </style>
</head>

<body data-playhtml>
    <div class="filter-container">
        <svg style="display: none">
            <defs>
                <filter id="ripple-displacement">
                    <feTurbulence type="fractalNoise" baseFrequency="0.02" numOctaves="1" result="noise">
                        <animate attributeName="baseFrequency" 
                                values="0.02;0.04" 
                                keyTimes="0;1"
                                dur="4s" 
                                repeatCount="indefinite"/>
                    </feTurbulence>
                    <feDisplacementMap in="SourceGraphic" in2="noise" scale="20" xChannelSelector="R" yChannelSelector="G">
                        <animate attributeName="scale" 
                                values="15;25" 
                                keyTimes="0;1"
                                dur="3s" 
                                repeatCount="indefinite"/>
                    </feDisplacementMap>
                </filter>
            </defs>
        </svg>

        <svg>
            <filter id="wavy">
            <feTurbulence id="turbulence" type="turbulence" numOctaves="1" 
            result="NOISE"></feTurbulence>
             <feDisplacementMap in="SourceGraphic" in2="NOISE" scale="50">
             </feDisplacementMap>
            <animate xlink:href="#turbulence" attributeName="baseFrequency" dur="60s" keyTimes="0;0.5;1"
          values="0.01 0.02;0.02 0.04;0.01 0.02" repeatCount="indefinite"></animate>
         </filter>
        </svg>


        <div class="landingPage page visible">
          <div class="background-image"></div>
          <div class="ascii-rocks">
          </div>


          <p class="skippingRockText"> Skip a rock and make a wish to the universe.
          </p>
           
          <button id="landingPageButton">( find a rock to skip )</button>
      </div>


      <!--  ########################################################################################################### -->

      <div class="secondPage page hidden" id="second-page">
        <!-- <div id="previous wishes">
          <p> wishes retrieved from the wishing pond </p>
    
        </div> -->

          <div id="input-container">
              <div id="wish-input-container">
                  <div class="input-line">
                      <span>I dream of a</span>
                      <input type="text" id="wish-input-1" placeholder=" ">
                      <span>where</span>
                  </div>
                  <div class="input-line">
                      <textarea id="wish-input-2" placeholder=" " rows="4"></textarea>
                  </div>
                  <div class="input-line">
                      <span>feelings of</span>
                      <input type="text" id="wish-input-3" placeholder="  ">
                  </div>
                  <button id="submit-wish">( go to the wishing sea )</button>
              </div>
          </div>
      </div>

      <!--  ########################################################################################################### -->
      <div class="thirdPage page hidden" id="third-page">
          <div id="ripple-container">
            <div class="background_ascii"></div>
              <div id="ripple-1"></div>
              <div class="cloud-container">
                  <pre class="ascii-cloud cloud-1">
                    ( .- )
                    (   .  )   
               ((        )
               =(.( ..__ :.)
               ...--_--_____;;,....____
                  </pre>
                  <pre class="ascii-cloud cloud-2">
                    ( .- )
                    (   .  )   
               ((        )
               =(.( ..__ :.)
               ...--_--_____;;,....____
'               '
                  </pre>
                  <pre class="ascii-cloud cloud-3">
       .-~-.
     .'     '.
    /         \
   '           '
                  </pre>
              </div>
              <p style="position: fixed; top: 15%; left: 50%; transform: translate(-50%, -50%); width: 100%; text-align: center; color: white; z-index: 4;">  </p>
              <div id="arrow"> ^ <br> |<br> |</div>
              <pre id="skippingRock" data-can-move>
                _.-'~~`~~'-._
             .-~`   `~.     -.    
           .'      .          `.
             `~-.____________.-~`
              </pre>
              <div class="button-container">
                  <button id="view-wishes-btn">( view other wishes )</button>
              </div>
          </div>
      </div>

      <!-- Modal for viewing other wishes -->
      <div class="modal-overlay"></div>
      <div id="wishes-modal">
          <p>other rocks skipped</p>
          <div class="wish-navigation">
              <span class="nav-arrow prev">&lt;</span>
              <pre class="ascii-rock">
         _.-'~~`~~'-._
         .-~`   `~.     -.    
         .'      .          `.
        `~-.____________.-~`
              </pre>
              <span class="nav-arrow next">&gt;</span>
          </div>
          <div id="wishes-list">
              <!-- Content will be dynamically populated by JavaScript -->
          </div>
          <button id="close-modal">( close )</button>
      </div>

      <script>
        // Function to switch pages
        function switchToPage(pageClass) {
          console.log('Switching to page:', pageClass); // Add logging
          document.querySelectorAll('.page').forEach(page => {
            page.classList.add('hidden');
            page.classList.remove('visible');
          });
          
          const targetPage = document.querySelector('.' + pageClass);
          if (targetPage) {
              targetPage.classList.remove('hidden');
              targetPage.classList.add('visible');
              console.log('Page switched successfully'); // Add logging
          } else {
              console.error('Target page not found:', pageClass); // Add error logging
          }
        }
        
        // Add event listener to transition to second page with the button
        document.getElementById('landingPageButton').addEventListener('click', function() {
          switchToPage('secondPage');
        });

        // Make switchToPage available globally
        window.switchToPage = switchToPage;
      </script>

    </div>
</body>

</html>
