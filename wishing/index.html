<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>skipping stones</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.compat.css"/>
    
    <!-- Scripts -->
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Lettering.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lettering.js/0.7.0/jquery.lettering.min.js"></script>
    <!-- Textillate.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/textillate/0.4.0/jquery.textillate.min.js"></script>
    <!-- Rita.js for poem generation -->
    <script src="https://unpkg.com/rita@3.1.3/dist/rita.min.js"></script>
    
    <!-- Our scripts -->
    <script src="wishing.js" defer></script>
    <script src="buttons.js" defer></script>
    <script src="grammar.js" defer></script>

    <style>
      .page {
        transition: opacity 0.8s ease-in-out;
      }
      .page.hidden {
        opacity: 0;
        pointer-events: none;
      }
      .page.visible {
        opacity: 1;
      }
    </style>
</head>

<body data-playhtml>
    <svg style="display: none">
        <defs>
            <filter id="distort">
                <feTurbulence type="fractalNoise" baseFrequency="0.02" numOctaves="1" result="noise">
                    <animate attributeName="baseFrequency" 
                            values="0.02;0.03" 
                            keyTimes="0;1"
                            dur="4s" 
                            repeatCount="indefinite"/>
                </feTurbulence>
                <feDisplacementMap in="SourceGraphic" in2="noise" scale="5" xChannelSelector="R" yChannelSelector="G"/>
            </filter>
        </defs>
    </svg>

    <div class="filter-container">
        <svg style="display: none">
            <defs>
                <filter id="ripple-displacement">
                    <feTurbulence type="fractalNoise" baseFrequency="0.02" numOctaves="1" result="noise">
                        <animate attributeName="baseFrequency" 
                                values="0.02;0.04" 
                                keyTimes="0;1"
                                dur="4s" 
                                repeatCount="indefinite"/>
                    </feTurbulence>
                    <feDisplacementMap in="SourceGraphic" in2="noise" scale="20" xChannelSelector="R" yChannelSelector="G">
                        <!-- <animate attributeName="scale" 
                                values="15;25" 
                                keyTimes="0;1"
                                dur="3s" 
                                repeatCount="indefinite"/> -->
                    </feDisplacementMap>
                </filter>
            </defs>
        </svg>

        <svg>
            <filter id="wavy">
            <feTurbulence id="turbulence" type="turbulence" numOctaves="1" 
            result="NOISE"></feTurbulence>
             <feDisplacementMap in="SourceGraphic" in2="NOISE" scale="50">
             </feDisplacementMap>
            <animate xlink:href="#turbulence" attributeName="baseFrequency" dur="60s" keyTimes="0;0.5;1"
          values="0.01 0.02;0.02 0.04;0.01 0.02" repeatCount="indefinite"></animate>
         </filter>
        </svg>


        <div class="landingPage page visible">
          <div class="background-image"></div>
          <div class="ascii-rocks">
          </div>

          <svg width="230" height="173" viewBox="0 0 230 173" fill="none" xmlns="http://www.w3.org/2000/svg" class="landing-svg">
            <path d="M52.1804 158.987C44.3236 159.86 36.7806 162.359 28.5783 162.359C24.5506 162.359 16.8858 153.507 14.5918 150.558C7.17046 141.016 1.60439 125.212 1.60439 113.157C1.60439 101.899 -0.369732 93.9206 6.16248 84.1222C25.907 54.5055 54.8811 35.6384 85.7105 19.1227C95.6082 13.8203 104.42 7.61026 115.057 3.88741C124.847 0.460843 134.785 0.515678 145.09 0.515678C154.462 0.515678 163.538 1.09798 172.689 3.01326C178.505 4.23069 183.844 8.1279 189.36 9.50697C200.897 12.3912 209.563 26.2767 216.771 34.795C219.812 38.3885 222.065 41.9275 224.638 45.9717C227.315 50.1769 226.037 54.8662 227.76 58.9591C231.802 68.5573 219.337 81.8652 214.461 89.3672C209.102 97.6121 203.758 107.901 197.165 115.092C188.247 124.821 178.524 134.039 169.067 143.253C151.533 160.337 131.478 169.097 107.377 171.288C103.778 171.615 97.1729 172.43 93.7652 170.726C90.2735 168.98 87.6674 166.855 83.65 166.855C74.7403 166.855 65.3121 165.731 56.1141 165.731C51.9641 165.731 40.9413 166.122 40.9413 160.111" stroke="#4C484A" stroke-linecap="round"/>
          </svg>

          <p class="skippingRockText"> Skip a rock and make a wish to the universe.
          </p>
           
          <button id="landingPageButton">( find a rock to skip )</button>
      </div>


      <!--  ########################################################################################################### -->

      <div class="secondPage page hidden" id="second-page">
        <!-- <div id="previous wishes">
          <p> wishes retrieved from the wishing pond </p>
    
        </div> -->

          <div id="input-container">
              <div id="wish-input-container">
                  <div class="input-line">
                      <span>I dream of a</span>
                      <input type="text" id="wish-input-1" placeholder=" ">
                      <span>where</span>
                  </div>
                  <div class="input-line">
                      <textarea id="wish-input-2" placeholder=" " rows="4"></textarea>
                  </div>
                  <div class="input-line">
                      <span>feelings of</span>
                      <input type="text" id="wish-input-3" placeholder="  ">
                  </div>
                  <button id="submit-wish">( go to the wishing sea )</button>
              </div>
          </div>
      </div>

      <!--  ########################################################################################################### -->
      <div class="thirdPage page hidden" id="third-page">
          <div id="ripple-container">
            <div class="background_ascii"></div>
              <div id="ripple-1"></div>
              <div class="cloud-container">
                  <pre class="ascii-cloud cloud-1">
                    ( .- )
                    (   .  )   
               ((        )
               =(.( ..__ :.)
               ...--_--_____;;,....____
                  </pre>
                  <pre class="ascii-cloud cloud-2">
                    ( .- )
                    (   .  )   
               ((        )
               =(.( ..__ :.)
               ...--_--_____;;,....____
'               '
                  </pre>
                  <pre class="ascii-cloud cloud-3">
       .-~-.
     .'     '.
    /         \
   '           '
                  </pre>
              </div>
              <p style="position: fixed; top: 15%; left: 50%; transform: translate(-50%, -50%); width: 100%; text-align: center; color: white; z-index: 4;">  </p>
              <div id="arrow"> ^ <br> |<br> |</div>
              <pre id="skippingRock" data-can-move>
                _.-'~~`~~'-._
             .-~`   `~.     -.    
           .'      .          `.
             `~-.____________.-~`
              </pre>
              <div class="button-container">
                  <button id="view-wishes-btn">( view other wishes )</button>
              </div>
          </div>
      </div>

      <!-- Modal for viewing other wishes -->
      <div class="modal-overlay"></div>
      <div id="wishes-modal">
          <p>other rocks skipped</p>
          <div class="wish-navigation">
              <span class="nav-arrow prev">&lt;</span>
              <pre class="ascii-rock">
         _.-'~~`~~'-._
         .-~`   `~.     -.    
         .'      .          `.
        `~-.____________.-~`
              </pre>
              <span class="nav-arrow next">&gt;</span>
          </div>
          <div id="wishes-list">
              <!-- Content will be dynamically populated by JavaScript -->
          </div>
          <button id="close-modal">( close )</button>
      </div>

      <script>
        // Function to switch pages
        function switchToPage(pageClass) {
          console.log('Switching to page:', pageClass); // Add logging
          document.querySelectorAll('.page').forEach(page => {
            page.classList.add('hidden');
            page.classList.remove('visible');
          });
          
          const targetPage = document.querySelector('.' + pageClass);
          if (targetPage) {
              targetPage.classList.remove('hidden');
              targetPage.classList.add('visible');
              console.log('Page switched successfully'); // Add logging
          } else {
              console.error('Target page not found:', pageClass); // Add error logging
          }
        }
        
        // Add event listener to transition to second page with the button
        document.getElementById('landingPageButton').addEventListener('click', function() {
          switchToPage('secondPage');
        });

        // Make switchToPage available globally
        window.switchToPage = switchToPage;
      </script>

    </div>
</body>

</html>
